(this["webpackJsonppredmaster-ui"]=this["webpackJsonppredmaster-ui"]||[]).push([[0],{45:function(e,a,t){},46:function(e,a,t){},54:function(e,a,t){},55:function(e,a,t){"use strict";t.r(a);var r=t(35),s=t.n(r),c=(t(45),t(33)),l=t(0),n=t(4),o=(t(46),t(59)),i=t.p+"static/media/logo.a9f5b799.png",d=t(1);var m=e=>{let{clientName:a,currentPage:t,setCurrentPage:r}=e;return Object(d.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light border-bottom",children:Object(d.jsxs)("div",{className:"container-lg",children:[Object(d.jsxs)("a",{className:"navbar-brand d-flex align-items-center",href:"/login",children:[Object(d.jsx)("img",{src:i,width:"40",height:"34",className:"d-inline-block align-top me-2",alt:""}),Object(d.jsx)("span",{className:"ms-2",style:{color:"#3957AF",fontWeight:"bold"},children:"PredMaster"})]}),Object(d.jsxs)("div",{className:"d-flex align-items-center",children:[a&&Object(d.jsx)("div",{className:"me-3 border-end pe-3",children:Object(d.jsx)("div",{className:"collapse navbar-collapse",children:Object(d.jsx)("ul",{className:"navbar-nav me-auto",children:Object(d.jsxs)(o.a,{title:(()=>{switch(t){case"/prevision":default:return"Previs\xe3o";case"/alarm":return"Alarme";case"/settings":return"Sensores"}})(),id:"basic-nav-dropdown",onSelect:e=>{r(e)},children:[Object(d.jsx)(o.a.Item,{eventKey:"/prevision",children:"Previs\xe3o"}),Object(d.jsx)(o.a.Item,{eventKey:"/alarm",children:"Alarme"}),Object(d.jsx)(o.a.Item,{eventKey:"/settings",children:"Sensores"})]})})})}),Object(d.jsx)("span",{className:"me-3",children:null!==a&&void 0!==a?a:"Nome do cliente"}),Object(d.jsx)("i",{className:"fas fa-user-circle fa-lg d-inline-block align-top rounded-circle"})]})]})})},j=t(60);const b="https://smiling-cardigan-cow.cyclic.app",u=e=>{var a;throw 404===(null===(a=e.response)||void 0===a?void 0:a.status)?new Error("Usu\xe1rio n\xe3o encontrado."):new Error("Erro ao entrar na aplica\xe7\xe3o.")};t(31);var h=t(61),v=t(62);var O=e=>{let{setUser:a}=e;const[t,r]=Object(l.useState)(""),[s,c]=Object(l.useState)(""),[n,o]=Object(l.useState)(""),[m,O]=Object(l.useState)(!1),[x,p]=Object(l.useState)(!1);return Object(d.jsx)("div",{className:"container mt-5",children:Object(d.jsx)("div",{className:"row justify-content-center",children:Object(d.jsx)("div",{className:"col-md-4",children:Object(d.jsx)("div",{className:"card",children:Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("div",{className:"text-center mb-3",children:Object(d.jsx)("img",{src:i,width:"159",height:"144",alt:""})}),Object(d.jsx)("h2",{className:"card-title text-center predmaster-title mb-5",style:{color:"#3957AF",fontWeight:"bold"},children:"PredMaster Dashboard"}),n&&Object(d.jsx)("div",{className:"alert alert-danger",role:"alert",children:n}),Object(d.jsxs)("form",{children:[Object(d.jsx)("div",{className:"mb-4",children:Object(d.jsxs)(h.a,{children:[Object(d.jsx)(h.a.Text,{children:Object(d.jsx)("i",{className:"fas fa-user"})}),Object(d.jsx)(v.a,{type:"text",className:"form-control ".concat(m?"is-invalid":""),id:"username",placeholder:"Nome de usu\xe1rio",value:t,onChange:e=>{r(e.target.value),O(!1)}})]})}),Object(d.jsx)("div",{className:"mb-4",children:Object(d.jsxs)(h.a,{children:[Object(d.jsx)(h.a.Text,{children:Object(d.jsx)("i",{className:"fas fa-lock"})}),Object(d.jsx)(v.a,{type:"password",className:"form-control ".concat(x?"is-invalid":""),id:"password",placeholder:"Senha",value:s,onChange:e=>{c(e.target.value),p(!1)}})]})}),Object(d.jsxs)("div",{className:"d-grid gap-2",children:[Object(d.jsx)("button",{type:"button",className:"btn btn-primary",onClick:async()=>{try{if(0===t.length)throw O(!0),new Error("Nome do usu\xe1rio \xe9 obrigat\xf3rio.");if(0===s.length)throw p(!0),new Error("Senha \xe9 obrigat\xf3rio.");{const e=await(async(e,a)=>{try{const t=b+"/predmaster/api/user"+"?username=".concat(e,"&password=").concat(a);return(await j.a.get(t)).data}catch(n){console.error("getUser - ",n),u(n)}})(t,s);a(e)}}catch(n){console.error("handleLogin - ",n),o(n.message)}},children:"Entrar"}),Object(d.jsx)("button",{type:"button",className:"btn btn-light",disabled:!0,children:"Esqueceu sua senha?"})]})]})]})})})})})},x=t(17);var p=e=>{let{color:a,title:t,total:r,porcentage:s}=e;return Object(d.jsx)(x.a,{text:"dark",style:{width:"18rem",border:(()=>{switch(a){case"Vermelho":case"Amarelo":case"Verde":return"none";default:return"default"}})()},className:"mb-2",children:Object(d.jsxs)(x.a.Body,{style:{backgroundColor:(()=>{switch(a){case"Vermelho":return"#FFDDE3";case"Amarelo":return"#FFE9C5";case"Verde":return"#E3FFD6";default:return"#FFFFFF"}})()},children:[Object(d.jsxs)(x.a.Title,{className:"d-flex justify-content-between align-items-center",children:[Object(d.jsx)("span",{style:{fontWeight:"bold"},children:t}),Object(d.jsx)("span",{style:{color:(()=>{switch(a){case"Vermelho":return"#FD0F39";case"Amarelo":return"#FFA000";case"Verde":return"#4CAF50";default:return"#BFBFBF"}})()},children:Object(d.jsx)("i",{className:"fas fa-exclamation-triangle"})})]}),Object(d.jsxs)(x.a.Text,{children:[Object(d.jsxs)("div",{children:["Total: ",r]}),Object(d.jsxs)("div",{children:["Porcentagem: ",s]}),Object(d.jsxs)("div",{children:["Previs\xe3o: ",(()=>{switch(a){case"Vermelho":return"menor que 60 dias";case"Amarelo":return"entre 60 e 120 dias";case"Verde":return"entre 121 e 365 dias";default:return"366 dias"}})()]})]})]})})};const g=["Vermelho","Amarelo","Verde","Transparente"],f=[{value:"sensorName",label:"Nome do Sensor"},{value:"sensorLocale",label:"Localiza\xe7\xe3o"},{value:"machineName",label:"M\xe1quina"},{value:"failurePredictability",label:"Previs\xe3o"}],N=[{value:"sensorName",label:"Nome do Sensor"},{value:"sensorLocale",label:"Localiza\xe7\xe3o"},{value:"machineName",label:"M\xe1quina"},{value:"date",label:"Data"},{value:"time",label:"Hora"},{value:"predominantFactor",label:"Fator Predomintante"},{value:"alarmColor",label:"Cor"}],y=[{value:"sensorName",label:"Nome do Sensor"},{value:"sensorLocale",label:"Localiza\xe7\xe3o"},{value:"machineName",label:"M\xe1quina"},{value:"yellowAlarmFFT",label:"FFT Amarelo"},{value:"redAlarmFFT",label:"FFT Vermelho"},{value:"yellowAlarmRMS",label:"RMS Amarelo"},{value:"redAlarmRMS",label:"RMS Vermelho"},{value:"variableType",label:"V\xe1riavel"}];var w=t(63),F=t(58);t(54);var S=e=>{let{headers:a,data:t}=e;const[r,s]=Object(l.useState)(""),[c,n]=Object(l.useState)([]),[o,i]=Object(l.useState)(1),[m,j]=Object(l.useState)(""),[b,u]=Object(l.useState)("none");Object(l.useEffect)((()=>{let e;e=""===r.trim()?t:t.filter((e=>Object.values(e).some((e=>e.toString().toLowerCase().includes(r.toLowerCase()))))),n(e)}),[r,t]),Object(l.useEffect)((()=>{let e;e="asc"===b?[...c].sort(((e,a)=>e[m].localeCompare(a[m]))):"desc"===b?[...c].sort(((e,a)=>a[m].localeCompare(e[m]))):t,n(e)}),[m,b]);const O=10*o,x=O-10,p=c.slice(x,O),g=Math.ceil(c.length/10),f=[];for(let l=1;l<=g;l++)f.push(Object(d.jsx)(w.a.Item,{active:l===o,onClick:()=>N(l),children:l},l));const N=e=>i(e);return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"d-flex justify-content-end",children:Object(d.jsxs)(h.a,{style:{maxWidth:"250px"},children:[Object(d.jsx)(h.a.Text,{children:Object(d.jsx)("i",{className:"fas fa-search"})}),Object(d.jsx)(v.a,{placeholder:"Pesquisar...",value:r,onChange:e=>s(e.target.value)})]})}),Object(d.jsxs)(F.a,{hover:!0,className:"mt-3",children:[Object(d.jsx)("thead",{children:Object(d.jsx)("tr",{className:"table-active",children:a.map(((e,a)=>Object(d.jsxs)("th",{onClick:()=>{return a=e.value,u("none"===b?"asc":"asc"===b?"desc":"none"),void j(a);var a},children:[Object(d.jsx)("span",{children:e.label}),m===e.value&&Object(d.jsx)("span",{children:"asc"===b?"  \u2191":"desc"===b?"  \u2193":""})]},a)))})}),Object(d.jsx)("tbody",{children:p.map(((e,a)=>Object(d.jsx)("tr",{children:Object.keys(e).map((a=>Object(d.jsx)("td",{children:e[a]},a)))},a)))})]}),Object(d.jsx)("div",{className:"d-flex justify-content-center custom-pagination",children:Object(d.jsx)(w.a,{children:f})})]})};const A=e=>e.split(",")[0].trim()+" dias";var E=e=>{let{alarms:a,previsions:t,settings:r,currentPage:s}=e;const[c,n]=Object(l.useState)([]),[o,i]=Object(l.useState)([]);Object(l.useEffect)((()=>{t.forEach((e=>{e.alarmStatus=(e=>{const a=parseInt(e.failurePredictability);return a>=121&&a<=365?"Verde":a>=60&&a<=120?"Amarelo":a>=0&&a<60?"Vermelho":"Transparente"})(e)}))}),[t]),Object(l.useEffect)((()=>{switch(s){case"/prevision":n(f),i((e=>e.map((e=>({sensorName:e.sensorName,sensorLocale:e.sensorLocale,machineName:e.machineName,failurePredictability:A(e.failurePredictability)}))))(t));break;case"/alarm":n(N),i((e=>e.map((e=>({sensorName:e.sensorName,sensorLocale:e.sensorLocale,machineName:e.machineName,data:e.date,time:e.time,predominantFactor:e.predominantFactor,alarmColor:e.alarmColor}))))(a));break;case"/settings":n(y),i((e=>e.map((e=>({sensorName:e.sensorName,sensorLocale:e.sensorLocale,machineName:e.machineName,yellowAlarmFFT:e.yellowAlarmFFT,redAlarmFFT:e.redAlarmFFT,yellowAlarmRMS:e.yellowAlarmRMS,redAlarmRMS:e.redAlarmRMS,variableType:e.variableType}))))(r))}}),[s]);const m=e=>{switch(e){case"Vermelho":return"Alarme Vermelho";case"Amarelo":return"Alarme Amarelo";case"Verde":return"Alarme Verde";default:return"Sem Conex\xe3o"}},j=e=>t.filter((a=>a.alarmStatus===e)).length.toString()+" alarmes",b=e=>{const a=t.length,r=t.filter((a=>a.alarmStatus===e)).length;return Math.round(r/a*100).toString()+"%"};return Object(d.jsxs)("div",{className:"container mt-4",style:{maxWidth:"1320px"},children:[Object(d.jsx)("div",{className:"row",children:g.map((e=>Object(d.jsx)("div",{className:"col-md-3 mb-3 d-flex",children:Object(d.jsx)(p,{color:e,title:m(e),total:j(e),porcentage:b(e)})},e)))}),Object(d.jsx)("div",{className:"row justify-content-center",children:Object(d.jsx)("div",{className:"col-md-12 mt-4",children:Object(d.jsx)(S,{headers:c,data:o})})})]})};const P=e=>{var a;throw 404===(null===(a=e.response)||void 0===a?void 0:a.status)?new Error("Alarme n\xe3o encontrado."):new Error("Erro ao carregar alarmes.")},C=e=>{var a;throw 404===(null===(a=e.response)||void 0===a?void 0:a.status)?new Error("Previs\xe3o n\xe3o encontrado."):new Error("Erro ao carregar previs\xf5es.")},T=e=>{var a;throw 404===(null===(a=e.response)||void 0===a?void 0:a.status)?new Error("Configura\xe7\xe3o n\xe3o encontrada."):new Error("Erro carregar configuracoes.")};var V=()=>{const[e,a]=Object(l.useState)(),[t,r]=Object(l.useState)([]),[s,c]=Object(l.useState)([]),[o,i]=Object(l.useState)([]),[u,h]=Object(l.useState)("/login"),v=Object(n.o)();return Object(l.useEffect)((()=>{(async()=>{try{if(null!==e&&void 0!==e&&e.username){const a=e.username,t=await(async e=>{try{const a=b+"/predmaster/api/alarm"+"?clientId=".concat(e);return(await j.a.get(a)).data}catch(a){console.error("getAlarm - ",a),P(a)}})(a);r(t);const s=await(async e=>{try{const a=b+"/predmaster/api/prevision"+"?clientId=".concat(e);return(await j.a.get(a)).data}catch(a){console.error("getPrevision - ",a),C(a)}})(a);c(s);const l=await(async e=>{try{const a=b+"/predmaster/api/settings"+"?clientId=".concat(e);return(await j.a.get(a)).data}catch(a){console.error("getSettings - ",a),T(a)}})(a);i(l),h("/prevision")}}catch(a){console.error("fetchData -",a)}})()}),[e]),Object(l.useEffect)((()=>{v(u)}),[u]),Object(d.jsxs)("div",{className:"app",children:[Object(d.jsx)(m,{clientName:null===e||void 0===e?void 0:e.company,currentPage:u,setCurrentPage:h}),Object(d.jsxs)(n.c,{children:[Object(d.jsx)(n.a,{path:"/login",element:Object(d.jsx)(O,{setUser:a})}),Object(d.jsx)(n.a,{path:"/prevision",element:Object(d.jsx)(E,{currentPage:"/prevision",alarms:t,previsions:s,settings:o})}),Object(d.jsx)(n.a,{path:"/settings",element:Object(d.jsx)(E,{currentPage:"/settings",alarms:t,previsions:s,settings:o})}),Object(d.jsx)(n.a,{path:"/alarm",element:Object(d.jsx)(E,{currentPage:"/alarm",alarms:t,previsions:s,settings:o})}),Object(d.jsx)(n.a,{path:"/history"})]})]})};s.a.createRoot(document.getElementById("root")).render(Object(d.jsx)(c.a,{children:Object(d.jsx)(V,{})}))}},[[55,1,2]]]);
//# sourceMappingURL=main.2942a382.chunk.js.map